<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Puppet Function: includable (Ruby 4.x API)
  
    &mdash; Documentation by YARD 0.9.14
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "puppet_functions_ruby4x::includable";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../puppet_function_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (i)</a> &raquo;
    <span class='title'><span class='object_link'>Puppet Functions</span></span>
     &raquo; 
    <span class="title">includable</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="puppet_function_list_link"
        href="../puppet_function_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Puppet Function: includable</h1>
<div class="box_info">
  <dl>
    <dt>Defined in:</dt>
    <dd>
      lib/puppet/functions/includable.rb
    </dd>
  </dl>
  <dl>
    <dt>Function type:</dt>
    <dd>Ruby 4.x API</dd>
  </dl>
</div>

<h2>Overview</h2>
<div class="method_details first">
  
  <div class="tags overload overload_item">
    <span class="overload">
      <span class="overload_item">
        <span class="signature first" style="margin-left: 0px;"><strong>includable(String $classname)</strong> &#x21d2; <tt>Any</tt> </span>
      </span>
    </span>
  </div>
  
  <div class="docstring">
    <div class="discussion">
      
<p>includable()</p>

<p>Function to detect wheter it is possible to include a given puppet class or
not based on whether the class file exists. The intended usage of this is
to allow lazy creation of role classes:</p>

<p>$pp_role = $<a href="'extensions'">trusted</a>[&#39;pp_role&#39;]  if
$includable($pp_role) {  include $pp_role  } else {  warning(“Class
$pp_role was not found - falling back to role::base”)  include role::base 
}</p>

<p>The reason for this is that Puppet deployers may want to assign roles to
particular nodes without <em>immediately</em> having to create the
associated role class. This removes the need for up-front work creating
role classes that are <em>TODO</em> and the need to regenerate certificates
once a suitable role class becomes available.</p>

<p>Function expects code to be found at /etc/puppetlabs/code/environments and
is environment aware. There is an undocumented private API for puppet which
could be used to hook into Puppet internals and test for class existance,
however this API is subject to change without notice and this would
entirely break classification if used as the example above suggests.
Instead, we convert the class name into a string and attempt to match a
regular expression defining the class inside it. If this matches the
intention of the user was <em>probably</em> to write a class, although we
make no claims as to its validity and subsequent inclusion will fail if
there are syntax errors.</p>

    </div>
  </div>
  
</div>


</div>

      <div id="footer">
     Generated by <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>.
</div>

    </div>
  </body>
</html>